---
title: "Experiment 1 List Design"
author: "Rachel"
date: /today
geometry: margin = 2cm
header-includes:
  - /usepackage{booktabs}
  - /usepackage{siunitx}
  - /usepackage{tabto}
  - /usepackage{soul}
  - /usepackage{xcolor}
  - /usepackage{placeins}
  - /usepackage{lscape}
  - /usepackage{animate}
  - /newcommand{/blandscape}{/begin{landscape}}
  - /newcommand{/elandscape}{/end{landscape}}
  - /makeatletter/renewcommand{/fps@table}{!ht}/makeatother
  - /setstcolor{red}
  - /usepackage{sectsty}
  - /sectionfont{/color{blue}} 
  - /subsectionfont{/color{blue}}
  - /subsubsectionfont{/color{darkgray}}

output:
  pdf_document: 
    fig_caption: yes
    fig_width: 7
    keep_tex: yes
    latex_engine: xelatex
    number_sections: yes
    toc: yes
    toc_depth: 4
  fontsize: 10pt
editor_options: 
  chunk_output_type: inline
---   
***
# Housekeeping   
The purpose of this file is to create the lists for Experiment 1
*Color file here: http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf*   

## Knitting    
```{r Knitting, include=F}

library(knitr)

opts_chunk$set(
  dev = 'pdf',
  comment = "", 
  echo = FALSE, 
  warning = TRUE, 
  message = TRUE,
  cache = FALSE, 
  size = "small",
  tidy.opts = list(width.cutoff = 200),
  fig.width = 8, 
  fig.height = 4.5, 
  fig.align = "center")

def.chunk.hook  <- knitr::knit_hooks$get("chunk")

knitr::knit_hooks$set(
  chunk = function(x, options) {
    x <- def.chunk.hook(x, options)
    ifelse(
      options$size != "normalsize", 
      paste0(
        "/n //", 
        options$size,
        "/n/n", 
        x, 
        "/n/n //normalsize"), 
      x)
  })

color_block = function(color) {
  function(x, options)        sprintf('//color{%s}//begin{verbatim}%s//end{verbatim}//color{black}', color, x)
}
knitr::knit_hooks$set(error = color_block('red'))
knitr::knit_hooks$set(warning = color_block('orange'))
```

## Libraries   
```{r Library, include=F}
library(tidyverse)
library(magrittr)
library(broom)          # for extraction of coefficients
library(gganimate)      # to animate plots
library(RColorBrewer)   # to select brewer colors
library(kableExtra) 
library(lme4)
library(lmerTest)
library(ggpubr)
```

```{r, include=F}
options(width = 110)
theme_set(theme_bw())
```

---

# Exposure Phase   
## Critical Items     
```{r Ciritcal Items}
# Table with the information on how the stims should be paired: Materials x Accent x Gender x Ear Assignment

## Word list -> removes reliance on order

### Materials A
Materials.A_S.Words = c(  
  "Parasite",
  "Obscene",
  "Medicine",
  "Tennessee",
  "Penninsula",
  "Hallucinate",
  "Arkansas",
  "Compensate",
  "Dinosaur",
  "Rehearsal"
)

Materials.A_Sh.Words = c(
  "Ambition",
  "Machinery",
  "Brochure",
  "Official",
  "Crucial",
  "Pediatrician",
  "Flourishing",
  "Reassure",
  "Graduation",
  "Vacation"
)

## Materials B
Materials.B_S.Words = c(
  "Pregnancy",
  "Democracy",
  "Embassy",
  "Legacy",
  "Reconcile",
  "Personal",
  "Eraser",
  "Episode",
  "Literacy",
  "Coliseum"
)

Materials.B_Sh.Words= c(
  "Initial",
  "Beneficial",
  "Negotiate",
  "Commercial",
  "Parachute",
  "Efficient",
  "Publisher",
  "Glacier",
  "Refreshing",
  "Impatient"  
)

## Items
tibble(
  Critical.Item_Num = 1:20,
  
  Talker.A = c(Materials.A_Sh.Words, Materials.B_S.Words),
  
  Talker.B = c(Materials.A_S.Words, Materials.B_Sh.Words),
  

  
  Talker.A_Sound = c(
    rep("Sh", 10),
    rep("S", 10)
  ),
  
  Talker.B_Sound = c(
    rep("S", 10),
    rep("Sh", 10)
  ),
  
  Materials = c(
    rep("A", 5),
    rep("B", 5),
    rep("A", 5),
    rep("B", 5)
  )
) %>% 
  
## Possible Assignments (Shift x Gender x Ear)
  ### Which Talker is Attended to is dependent on instructions
  crossing(
    Shift = c(
      "Shifted",
      "Unshifted"
    ),    
    Talker.A_Gender = c(
      "Female", 
      "Male"
    ),
    Talker.A_Ear = c(
      "Left", 
      "Right"
    )
) %>%
  

## Adds in column noting Gender + Ear Assignment for Talker B
  mutate(
      Talker.B_Gender =
        case_when( 
         Talker.A_Gender == "Female"
          ~ "Male", 
          T ~ "Female"
        )) %>%
 
 mutate(
    Talker.B_Ear =
      case_when(
        Talker.A_Ear == "Left"
        ~ "Right",
        T ~ "Left"
      )) %>%
  
   
  ## Talker 1 
    mutate(
      Talker = 
        case_when(
          Talker.A_Ear == "Left"
          ~ "1",
          T ~ "2"
        )
    ) %>%


## Add Column for matching to Filler Items
  mutate(
    Filler.Match = 
      case_when(
        Talker.A_Gender == "Female" &
        Talker.A_Ear == "Left"
        ~ "1-2",
        
        Talker.B_Gender == "Female" &
        Talker.B_Ear == "Left"
        ~ "2-1",
        
        Talker.A_Gender == "Male" &
        Talker.A_Ear == "Left"
        ~ "3-4",
        
        Talker.B_Gender == "Male" &
        Talker.B_Ear == "Left"
        ~ "4-3"
      )
  ) %>%
  
  ### List
  
  mutate(
    List = 
       case_when(
     ### 01
        Materials == "A" &
        Shift == "Unshifted" &
        Talker.A_Sound == "S" & 
        Talker.A_Gender == "Female" 
        ~ "01",
        
        Materials == "B" &
        Shift == "Shifted" &
        Talker.A_Sound == "S" & 
        Talker.A_Gender == "Female"
        ~ "01",
      
      ### 02 
        Materials == "A" &
        Shift == "Shifted" &
        Talker.A_Sound == "S" & 
        Talker.A_Gender == "Female"
        ~ "02",
        
        Materials == "B" &
        Shift == "Unshifted" &
        Talker.A_Sound == "S" & 
        Talker.A_Gender == "Female"
        ~ "02",
     
      ### 03  
        Materials == "A" &
        Shift == "Unshifted" &
        Talker.A_Sound == "Sh" & 
        Talker.A_Gender == "Female"
        ~ "03",
        
        Materials == "B" &
        Shift == "Shifted" &
        Talker.A_Sound == "Sh" & 
        Talker.A_Gender == "Female" 
        ~ "03",
    
      ### 04    
        Materials == "A" &
        Shift == "Shifted" &
        Talker.A_Sound == "Sh" & 
        Talker.A_Gender == "Female"
        ~ "04",
        
        Materials == "B" &
        Shift == "Unshifted" &
        Talker.A_Sound == "Sh" & 
        Talker.A_Gender == "Female" 
        ~ "04",
      
      ### 05
        Materials == "A" &
        Shift == "Unshifted" &
        Talker.A_Sound == "S" & 
        Talker.A_Gender == "Male" 
        ~ "05",
        
        Materials == "B" &
        Shift == "Shifted" &
        Talker.A_Sound == "S" & 
        Talker.A_Gender == "Male" 
        ~ "05",
      
      ### 06 
        Materials == "A" &
        Shift == "Shifted" &
        Talker.A_Sound == "S" & 
        Talker.A_Gender == "Male" 
        ~ "06",
        
        Materials == "B" &
        Shift == "Unshifted" &
        Talker.A_Sound == "S" & 
        Talker.A_Gender == "Male" 
        ~ "06",
     
      ### 07  
        Materials == "A" &
        Shift == "Unshifted" &
        Talker.A_Sound == "Sh" & 
        Talker.A_Gender == "Male" 
        ~ "07",
        
        Materials == "B" &
        Shift == "Shifted" &
        Talker.A_Sound == "Sh" & 
        Talker.A_Gender == "Male" 
        ~ "07",
    
      ### 08    
        Materials == "A" &
        Shift == "Shifted" &
        Talker.A_Sound == "Sh" & 
        Talker.A_Gender == "Male" 
        ~ "08",
        
        Materials == "B" &
        Shift == "Unshifted" &
        Talker.A_Sound == "Sh" & 
        Talker.A_Gender == "Male" 
        ~ "08"
    )
  ) %>%
  
   ## Talker A 
    mutate(
      A = 
        paste0(
        ### Shift
        case_when(
          Shift == "Shifted" 
          ~ paste0("As"),
          Shift == "Unshifted" 
          ~ paste0("S")
          ),
  
        ### Sound
        case_when(
          Talker.A_Sound == "S"
          ~ paste0("", sep = "."),
          Talker.A_Sound == "Sh"
          ~ paste0("h", sep = ".")
        ),
  
        ### Talker A Word 
        paste0(Talker.A),
  
        ### Gender Assignment
        case_when(
          Talker.A_Gender == "Female" 
          ~ paste0(sep = ".", "F"), 
          T ~ paste0(sep = ".", "M")
        ),
        
        ### Ear Assignment
        case_when(
          Talker.A_Ear == "Left" 
          ~ paste0(sep = ".", "L"), 
          T ~ paste0(sep = ".", "R")
        )
        
    )) %>%
  view() %>%

  ## Talker B
  mutate(
    B = 
      paste0(
        
      ### Shift
        case_when(
          Shift == "Shifted" 
          ~ paste0("As"),
          Shift == "Unshifted" 
          ~ paste0("S")
          ),
  
        ### Sound
        case_when(
          Talker.B_Sound == "S"
          ~ paste0("", sep = "."),
          Talker.B_Sound == "Sh"
          ~ paste0("h", sep = ".")
        ),
  
          ### Talker B Word
          paste0(Talker.B),
  
          ### Gender Assignment
          case_when(
            Talker.B_Gender == "Female" 
            ~ paste0(sep = ".", "F"), 
            T ~ paste0(sep = ".", "M")
          ),
        
        ### Ear Assignment
        case_when(
          Talker.A_Ear == "Left" 
          ~ paste0(sep = ".", "R"), 
          T ~ paste0(sep = ".", "L")
        )
      )) %>%
  view() %>%

# Changing file names
  mutate(
    filename = 
      paste0(
        "Critical", 
        sep = "_",
        
  ## List
  paste0(List, sep =  "."),  
 
   ## Materials
        case_when(
          Materials == "A" 
          ~ paste0("A", sep = "_"),
          Materials == "B" 
          ~ paste0("B", sep = "_")
          ),
  
    ## Order
        case_when(
        Talker == "1"
        ~ paste0(A, sep = "_", B),
        T ~ paste0(B, sep = "_", A)
        ),

      ### file suffix  
        paste0(".wav")   
      )) %>% 
  
  ## Repetition of File within List
  mutate(
    rep = 1
  ) %>%
  
view() %>%
  
# CSV Files

## Remove all columns but file names
select(-c(A, B, Talker, Filler.Match))  %>%
  
## Group files
group_by(List) %>%

group_map(.f = ~ write_csv(.x, file = paste0("C:Stimuli/Experiment_1/Lists/Exposure_Phase/Critical_Lists/Critical_",  .y$List, ".csv")))
```


## Filler Items   
```{r Filler Items}

## Word List
Set.A_Word = c(
  "America",
  "Blueberry",
  "Camera",
  "Directory",
  "Dynamite",
  "Gardenia",
  "Hamburger",
  "Hurdle",
  "Inhabit",
  "Keyboard",
  "Lengthen",
  "Lingering",
  "Melancholy",
  "Napkin",
  "Ornament",
  "Pineapple",
  "Purgatory",
  "Therapeutic",
  "Tutorial",
  "Wealthy"
)

Set.B_Word = c(
  "Bakery",
  "Bullying",
  "Continually",
  "Document",
  "Eighty",
  "Grammatical",
  "Identical",
  "Interior",
  "Knowingly",
  "Lethal",
  "Lobbying",
  "Membrane",
  "Negate",
  "Outnumber",
  "Parakeet",
  "Platonic",
  "Tactical",
  "Titanium",
  "Umbrella",
  "Worldly"
)

Set.C_Word = c(
  "Ballerina",
  "Burglary",
  "Domineering",
  "Embody",
  "Gullible",
  "Honeymoon",
  "Illuminate",
  "Ironic",
  "Laminate",
  "Liability",
  "Marina",
  "Metrical",
  "Nightmare",
  "Panicking",
  "Pilgrim",
  "Predict",
  "Terminal",
  "Turbulent",
  "Undermine",
  "Wrinkle"
)

Set.A_NonWord = c(
  "Wominid",
  "Ungelnin",
  "Tilegkalo",
  "Rimkeluwar",
  "Rakil",
  "Perkum",
  "Nomerae",
  "Namuary",
  "Logelai", 
  "Lenediaw", 
  "Kelabidel",
  "Inpaki",
  "Hintarber",
  "Gardimuallay",
  "Gairelom",
  "Bikanian",
  "Baliber",
  "Amalar",
  "Ailounam",
  "Acomining"
)

Set.B_Nonword = c(
  "Wojalto",
  "Tounamplem",
  "Ryligal",
  "Rawamtee",
  "Ploupelai",
  "Omperoge",
  "Nempring",
  "Mibgem", 
  "Meidnow",
  "Kermimer",
  "Itempider",
  "Aknid",
  "Ibirak",
  "Halken",
  "Ganla",
  "Dadigal",
  "Bamtell",
  "Anemer",
  "Lilgrai",
  "Admunker"
)

Set.C_Nonword = c(
  "Youmgel",
  "Tymolape",
  "Tamical",
  "Rengime",
  "Pourilar",
  "Almikquary",
  "Niritaly",
  "Makid",
  "Kaldemia",
  "Imdalier",
  "Kloumidiger",
  "Halomimoc",
  "Gerbualo",
  "Galliwinou",
  "Emhoutic",
  "Dilkuaund",
  "Bowidai",
  "Anolipa",
  "Alnadiro",
  "Aigi"
)

## Table
tibble(
  Set = c(
    rep("A", 20),
    rep("B", 20),
    rep("C", 20)
  ), 
  
  Filler.Item_Num = c(
    rep(1:20,3) 
  ),
  
  Talker.A_Word = c(
    Set.A_Word,
    Set.B_Word,
    Set.C_Word
  ),
  
  Talker.B_Nonword = c(
    Set.A_NonWord,
    Set.B_Nonword,
    Set.C_Nonword
  )
) %>%
  
  crossing(
    Talker.A_Gender = c(
      "Female", 
      "Male"
    ),
    Talker.A_Ear = c(
      "Left", 
      "Right"
    )) %>%
  
  ## Adds in column noting Gender + Ear Assignment for Talker B
  mutate(
      Talker.B_Gender =
        case_when( 
         Talker.A_Gender == "Female"
          ~ "Male", 
          T ~ "Female"
        )) %>%
 
 mutate(
    Talker.B_Ear =
      case_when(
        Talker.A_Ear == "Left"
        ~ "Right",
        T ~ "Left"
      )) %>%
  
  ## Adds Version
  mutate(
      Set.Version =
        case_when( 
           Talker.A_Gender == "Male" &
           Talker.A_Ear == "Right"
            ~ "1", 
          
           Talker.A_Gender == "Female" &
           Talker.A_Ear == "Left"
            ~ "2", 
           
           Talker.A_Gender == "Female" &
           Talker.A_Ear == "Right" 
            ~ "3", 
           
           Talker.A_Gender == "Male" &
           Talker.A_Ear == "Left" 
            ~ "4"
        )) %>%
  
  ## Adds Combo
  mutate(
      Set.Combo =
        case_when( 
          
          ## Set A    
            Set == "A" &
            Set.Version == "3"
            ~ "1", 
            
            Set == "A" &
            Set.Version == "1"
            ~ "2",
           
            Set == "A" &
            Set.Version == "2"
            ~ "3",
           
            Set == "A" &
            Set.Version == "4"
            ~ "4",
            
          ## Set B    
            Set == "B" &
            Set.Version == "4"
            ~ "1", 
            
            Set == "B" &
            Set.Version == "2"
            ~ "2",
           
            Set == "B" &
            Set.Version == "1"
            ~ "3",
           
            Set == "B" &
            Set.Version == "3"
            ~ "4",
          
           ## Set C    
            Set == "C" &
            Set.Version == "1"
            ~ "1", 
            
            Set == "C" &
            Set.Version == "3"
            ~ "2",
           
            Set == "C" &
            Set.Version == "4"
            ~ "3",
           
            Set == "C" &
            Set.Version == "2"
            ~ "4"
        )) %>%

## Adds Attended Talker
  
  ### Attended Gender
  mutate( 
    Attended.Talker = 
      case_when(
        Set.Combo == "1" |
        Set.Combo == "3"
        ~ "Female",
        T ~ "Male"
     )
    ) %>%
  
  ### Attended Ear
  mutate( 
    Attended.Ear = 
      case_when(
        Set.Combo == "1" |
        Set.Combo == "4"
        ~ "Left",
        T ~ "Right"
      )
  ) %>%
  
  ## Repetition of File within List
  mutate(
    rep = 1
  ) %>%


# Changing file names
  mutate(
    filename = 
      paste0(
        "Filler", 
        sep = "_",
  
  ## Set
  case_when(
    Set == "A"
    ~ paste0("A", sep = "."),
    Set == "B"
    ~ paste0("B", sep = "."),
    Set == "C"
    ~ paste0("C", sep = ".")
  ),
  
  ## Version
  case_when(
    Set.Version == "1"
    ~ paste0("01", sep = "_"),
    Set.Version == "2"
    ~ paste0("02", sep = "_"),
    Set.Version == "3"
    ~ paste0("03", sep = "_"),
    Set.Version == "4"
    ~ paste0("04", sep = "_")
  ),
  
        
  ## Talker A 
     
        ### Word
          paste0("W", sep = "."),
  
        ### Talker A Word 
          paste0(Talker.A_Word),
          
        ### Gender Assignment
        case_when(
          Talker.A_Gender == "Female" 
          ~ paste0(sep = ".", "F"), 
          T ~ paste0(sep = ".", "M")
        ),
          
        ### Ear Assignment
        case_when(
          Talker.A_Ear == "Left" 
          ~ paste0(sep = ".", "L"), 
          T ~ paste0(sep = ".", "R")
        ),
        
      sep = "_",
        
  ## Talker B
        
        ### Nonword
        paste0("N", sep = "."),
  
        ### Talker B Word
        paste0(Talker.B_Nonword),
  
          ### Gender Assignment
          case_when(
            Talker.B_Gender == "Female" 
            ~ paste0(sep = ".", "F"), 
            T ~ paste0(sep = ".", "M")
          ),
          
          ### Ear Assignment
          case_when(
            Talker.B_Ear == "Left" 
            ~ paste0(sep = ".", "L"), 
            T ~ paste0(sep = ".", "R")
          ),
    
          ### File Suffix
          paste0(".wav")
      )) %>% 
  
  view() %>%

# CSV Files
  
## Remove columns in CSV File -> only need file names
select(-c()) %>%

## Group         
group_by(Set.Combo, Attended.Talker, Attended.Ear) %>%  
  
group_map(.f = ~ write_csv(.x, file = paste0("C:Stimuli/Experiment_1/Lists/Exposure_Phase/Filler_Lists/Filler.", .y$Set.Combo, "_Attended.Talker_", .y$Attended.Talker, "_", .y$Attended.Ear, ".csv")
))
```

# Test Phase
```{r Test Phase}

# Table
tibble(
  Test.Items = c(
  "ashi.25",
  "ashi.30",
  "ashi.40",
  "ashi.45",
  "ashi.50",
  "ashi.70"
  ),
  
  Test.Item_Num = 1:6
)%>%

## Attended Talker x First Talker
crossing(
  Talker_Gender = c(
    "Female", 
    "Male"
    ),
  
  Block = 1:12
) %>%

### Group every 2 blocks
  mutate(
    First_Talker = case_when( 
      abs(Block %% 4) == 1 &
      Talker_Gender == "Male"
      ~ "Male",
      
      abs(Block %% 4) == 2 &
      Talker_Gender == "Male"
      ~ "Male",
      
      abs(Block %% 4) == 3 &
      Talker_Gender == "Female"
      ~ "Male",      
            
      abs(Block %% 4) == 0 &
      Talker_Gender == "Female"
      ~ "Male",  
      
      abs(Block %% 4) == 1 &
      Talker_Gender == "Female"
      ~ "Female",
      
      abs(Block %% 4) == 2 &
      Talker_Gender == "Female"
      ~ "Female",
      
      abs(Block %% 4) == 3 &
      Talker_Gender == "Male"
      ~ "Female",
      
      abs(Block %% 4) == 0 &
      Talker_Gender == "Male"
      ~ "Female"
      ),

### 2 possible Lists: starting with the Female talker or the Male talker
    Test_Version = case_when(
      First_Talker == "Female"
      ~ "A",
      T ~ "B"
    )) %>%
  
### Repetition of File within List
  mutate(
    rep = 1
  ) %>%

  
# File name
mutate(
 Filename = paste0(
   "Test",
   sep = "_",
   Test_Version,
   sep = ".",
   
   case_when(
     Block < 10
     ~ paste0("0", Block),
     T ~ paste0(Block)
   ),
   
   sep = "_",
    case_when(
     Talker_Gender == "Female"
     ~ paste0("F", sep = "."), 
     T ~ paste0("M", sep = ".")
   ),
   Test.Item_Num,
   sep = ".",   
   Test.Items,
  paste0(".wav")
)) %>%

    view() %>%
  
# CSV Files

## Remove file columns <- all but file names
select(-c()) %>%

## Group files into list 
group_by(Test_Version, Block) %>%

group_map(.f = ~ write_csv(.x, file = paste0("C:Stimuli/Experiment_1/Lists/Test_Phase/Test.", .y$Test_Version,"_Block.", .y$Block, ".csv")
))
```

_______

# File Renaming

## Critical Items

```{r Critical Rename_S.F.L}
## Left: Female S Unambiguous; Right: Male Sh Unambiguous

Files <- list.files(path = "Stimuli/Experiment_1/Items_Critical/F.S_M.Sh/Nonambiguous/")


for (f in Files) {
print(f)  
  
  old.files <- paste0(
    "Stimuli/Experiment_1/Items_Critical/F.S_M.Sh/Nonambiguous/", 
    f) 
  
  f.Category = gsub("^200ms", "Critical", f)
  f.left_Shift = gsub("F.S", "S", f.Category)
  f.left_Gender.Ear = gsub("_M.", ".F.L_", f.left_Shift)
  f.right_Shift = gsub("Sh", "Sh", f.left_Gender.Ear)
  f.right_Gender.Ear = gsub(".wav", ".M.R.wav", f.right_Shift)
  
  new.files <- paste0("Stimuli/Experiment_1/Items_Critical/1/", f.right_Gender.Ear)
  
  file.rename(old.files, new.files)
}
```


```{r Critical Rename_As.F.L}
## Left: Female S Ambiguous; Right: Male Sh Ambiguous

Files <- list.files(path = "Stimuli/Experiment_1/Items_Critical/F.S_M.Sh/Ambiguous/")

for (f in Files) {

  
  old.files <- paste0(
    "Stimuli/Experiment_1/Items_Critical/F.S_M.Sh/Ambiguous/", 
    f) 

  f.Category = gsub("^200ms", "Critical", f)

  f.left_Shift = gsub("F.Xs", "As", f.Category)
  f.left_Gender.Ear = gsub("_M.", ".F.L_", f.left_Shift)
  f.right_Shift = gsub("Xsh", "Ash", f.left_Gender.Ear)
  f.right_Gender.Ear = gsub(".wav", ".M.R.wav", f.right_Shift)
  
  new.files <- paste0("Stimuli/Experiment_1/Items_Critical/2/", f.right_Gender.Ear)
  
  file.rename(old.files, new.files)
}
```

```{r Critical Rename_Sh.F.L}
## Left: Female Sh Unambiguous; Right: Male S Unambiguous
Files <- list.files(path = "Stimuli/Experiment_1/Items_Critical/F.Sh_M.S/Nonambiguous/")

for (f in Files) {
  
  old.files <- paste0(
    "Stimuli/Experiment_1/Items_Critical/F.Sh_M.S/Nonambiguous/", 
    f) 

  f.Category = gsub("^200ms", "Critical", f)
  f.left_Shift = gsub("F.Sh", "Sh", f.Category)
  f.left_Gender.Ear = gsub("_M.", ".F.L_", f.left_Shift)
  f.right_Shift = gsub("_s", "_S", f.left_Gender.Ear)
  f.right_Gender.Ear = gsub(".wav", ".M.R.wav", f.right_Shift)

  new.files <- paste0("Stimuli/Experiment_1/Items_Critical/3/", f.right_Gender.Ear)
  
  file.rename(old.files, new.files)
}
```

```{r Critical Rename_Ash.F.L}
## Left: Female Sh Ambiguous; Right: Male S Ambiguous
Files <- list.files(path = "Stimuli/Experiment_1/Items_Critical/F.Sh_M.S/Ambiguous/")

for (f in Files) {
  
  old.files <- paste0(
    "Stimuli/Experiment_1/Items_Critical/F.Sh_M.S/Ambiguous/", 
    f) 

  f.Category = gsub("^200ms", "Critical", f)
  f.left_Shift = gsub("F.Xsh", "Ash", f.Category)
  f.left_Gender.Ear = gsub("_M.", ".F.L_", f.left_Shift)
  f.right_Shift = gsub("Xs", "As", f.left_Gender.Ear)
  f.right_Gender.Ear = gsub(".wav", ".M.R.wav", f.right_Shift)

  new.files <- paste0("Stimuli/Experiment_1/Items_Critical/4/", f.right_Gender.Ear)
  
  file.rename(old.files, new.files)
}
```

```{r Critical Rename_S.M.L}
## Left: Male S Unambiguous; Right: Female Sh Unambiguous
Files <- list.files(path = "Stimuli/Experiment_1/Items_Critical/M.S_F.Sh/Nonambiguous/")

for (f in Files) {
  
  old.files <- paste0(
    "Stimuli/Experiment_1/Items_Critical/M.S_F.Sh/Nonambiguous/", 
    f) 

  f.Category = gsub("^200ms", "Critical", f)
  f.left_Shift = gsub("M.S.", "S.", f.Category)
  f.left_Gender.Ear = gsub("_F.", ".M.L_", f.left_Shift)
  f.right_Shift = gsub("L_Sh.", "L_Sh.", f.left_Gender.Ear)
  f.right_Gender.Ear = gsub(".wav", ".F.R.wav", f.right_Shift)

  new.files <- paste0("Stimuli/Experiment_1/Items_Critical/5/", f.right_Gender.Ear)
  
  file.rename(old.files, new.files)
}
```

```{r Critical Rename_As.M.L}
## Left: Male S Ambiguous; Right: Female Sh Ambiguous
Files <- list.files(path = "Stimuli/Experiment_1/Items_Critical/M.S_F.Sh/Ambiguous/")

for (f in Files) {
  
  old.files <- paste0(
    "Stimuli/Experiment_1/Items_Critical/M.S_F.Sh/Ambiguous/",
    f) 

  f.Category = gsub("^200ms", "Critical", f)
  f.left_Shift = gsub("M.Xs", "As", f.Category)
  f.left_Gender.Ear = gsub("_F.", ".M.L_", f.left_Shift)
  f.right_Shift = gsub("Xsh", "Ash", f.left_Gender.Ear)
  f.right_Gender.Ear = gsub(".wav", ".F.R.wav", f.right_Shift)

  new.files <- paste0("Stimuli/Experiment_1/Items_Critical/6/", f.right_Gender.Ear)
  
  file.rename(old.files, new.files)
}
```

```{r Critical Rename_Sh.M.L}
## Left: Male Sh Unambiguous; Right: Female S Unambiguous
Files <- list.files(path = "Stimuli/Experiment_1/Items_Critical/M.Sh_F.S/Nonambiguous/")

for (f in Files) {
  
  old.files <- paste0(
    "Stimuli/Experiment_1/Items_Critical/M.Sh_F.S/Nonambiguous/", 
    f) 

  f.Category = gsub("^200ms", "Critical", f)
  f.left_Shift = gsub("M.Sh", "Sh", f.Category)
  f.left_Gender.Ear = gsub("_F.", ".M.L_", f.left_Shift)
  f.right_Shift = gsub("S", "S", f.left_Gender.Ear)
  f.right_Gender.Ear = gsub(".wav", ".F.R.wav", f.right_Shift)

  new.files <- paste0("Stimuli/Experiment_1/Items_Critical/7/", f.right_Gender.Ear)
  
  file.rename(old.files, new.files)
}
```

```{r Critical Rename_Ash.M.L}
## Left: Male Sh Ambiguous; Right: Female S Ambiguous
Files <- list.files(path = "Stimuli/Experiment_1/Items_Critical/M.Sh_F.S/Ambiguous/")

for (f in Files) {
  
  old.files <- paste0(
    "Stimuli/Experiment_1/Items_Critical/M.Sh_F.S/Ambiguous/",
    f) 

  f.Category = gsub("^200ms", "Critical", f)
  f.left_Shift = gsub("M.Xsh", "Ash", f.Category)
  f.left_Gender.Ear = gsub("_F.", ".M.L_", f.left_Shift)
  f.right_Shift = gsub("Xs", "As", f.left_Gender.Ear)
  f.right_Gender.Ear = gsub(".wav", ".F.R.wav", f.right_Shift)

  new.files <- paste0("Stimuli/Experiment_1/Items_Critical/8/", f.right_Gender.Ear)
  
  file.rename(old.files, new.files)
}
```

-----

```{r Critical List/Materials}

Files <- list.files(path = "Stimuli/Experiment_1/Items_Critical/8B/")

for (f in Files) {
  
  old.files <- paste0(
    "Stimuli/Experiment_1/Items_Critical/8B/",
    f) 

  f.list = gsub("Critical", "Critical_08.X", f)
  f.materials = gsub(".X", ".B", f.list)

  new.files <- paste0("Stimuli/Experiment_1/Items_Critical/8/", f.materials)
  
  file.rename(old.files, new.files)
}
```
------

# CSV File (Concat?)
## This is not going too well :/
```{r}
#Specify the input and output paths
folder_path <- "C:Stimuli/Experiment_1/Lists/Exposure_Phase/Filler_Lists" #File path to the folder with the *.csv files
output_file <- "C:Stimuli/Experiment_1/Lists/Exposure_Phase/Filler_Lists/Version 4"
#File path + file name for the resulting file
file_date <- "2022-05-07_" #Specific to remove pattern in the file_names, remove if not needed

#Create one-column table with the path of every file per rows in the specified folder named "all_of_them"
all_of_them <- fs::dir_ls(folder_path)
file_names <- list.files(folder_path)

#Loop that reads every file in the folder ands saves the data in my_content.
for (i in seq_along(file_names)) {

my_content <- read_csv(
file = all_of_them[[i]], show_col_types = FALSE)

#Creates data frame for my_content.
df <- data.frame(my_content)

#Removes rows 1 to 301 for each *.csv file.
header_df <- file_names[i]
new_data <- df[-c(1:300),] #Removes specific rows, remove or modify if needed
new_df <- data.frame(new_data)
new_df <- new_df%>%dplyr::mutate(sample=header_df)

#Writes table with the data from all the *.csv files and
#exports it in the output_file path.
write.table(new_df, file = output_file, sep = “,”,
append = TRUE, quote = FALSE,
col.names = FALSE, row.names = FALSE)
}

### Export the created *.csv and then imports it again
#Export the created *.csv
created_csv <- read_csv(output_file)

#Creates a data frame for created_csv
collapsed_csv <- data.frame(created_csv)
```
```{r cont.}

)
```
